\subsubsection{概要}EssentialParticleIクラスは相互作用の計算に必要なi粒子情報を持つクラスである。EssentialParticleIクラスはFullParticleクラス(節\ref{sec:fullparticle})のサブセットであり、FDPSの内部では、このクラスがFullParticleクラスから情報を読み取る。情報を読み取るために、このクラスはいくつかのメンバ関数を持つ必要がある。以下、この節の前提、常に必要なメンバ関数と、場合によっては必要なメンバ関数について記述する。\subsubsection{前提}この節の中では、名前空間ParticleSimulatorをPSと省略する。このクラスのクラス名をEssentialParticleIとする。また、粒子すべての情報を持つクラスのクラス名をFullParticleとする。このFullParticleは節\ref{sec:fullparticle}のクラスFullParticleと同一のものである。EssentialParticleI, FullParticleというクラス名は変更可能である。ParticleSimulatorをPSと省略すること、EssentialParticleIとFullParticleの宣言は以下の通りである。\begin{screen}\begin{verbatim}namespace PS = ParticleSimulator;class FullParticle;class EssentialParticleI;\end{verbatim}\end{screen}\subsubsection{必要なメンバ関数}\subsubsubsection{概要}常に必要なメンバ関数はgetPosとCopyfromFPである。getPosはEssentialParticleIクラスの位置情報をFDPSに読み込ませるための関数で、copyFromFPはFullParticleクラスの情報をEssentialParticleIクラスに書きこむ関数である。これらのメンバ関数の記述例と解説を以下に示す。\subsubsubsection{getPos}\begin{screen}\begin{verbatim}class EssentialParticleI {public:    PS::F64vec pos;    PS::F64vec getPos() const {        return this->pos;    }};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 前提}    EssentialParticleIのメンバ変数posはある１つの粒子の位置情報。このposのデー  タ型はPS::F64vec型。  \item {\bf 引数}  なし  \item {\bf 返値}  PS::F64vec型。EssentialParticleIクラスの位置情報を保持したメンバ変数。  \item {\bf 機能}  EssentialParticleIクラスの位置情報を保持したメンバ変数を返す。  \item {\bf 備考}  EssentialParticleIクラスのメンバ変数posの変数名は変更可能。\end{itemize}\subsubsubsection{copyFromFP}\begin{screen}\begin{verbatim}class FullParticle {public:    PS::S64    identity;    PS::F64    mass;    PS::F64vec position;    PS::F64vec velocity;    PS::F64vec acceleration;    PS::F64    potential;};class EssentialParticleI {public:    PS::S64    id;    PS::F64vec pos;    void copyFromFP(const FullParticle & fp) {        this->id  = fp.identity;        this->pos = fp.position;    }};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 前提}  FullParticleクラスのメンバ変数identity, positionとEssentialParticleI  クラスのメンバ変数id, posはそれぞれ対応する情報を持つ。\item {\bf 引数}  fp: 入力。const FullParticle \&型。FullParticleクラスの情報を持つ。  \item {\bf 返値}  なし。  \item {\bf 機能}  FullParticleクラスの持つ１粒子の情報の一部をEssnetialParticleIクラス  に書き込む。  \item {\bf 備考}  FullParticleクラスのメンバ変数の変数名、EssentialParticleIクラスのメ  ンバ変数の変数名は変更可能。メンバ関数EssentialParticleI::copyFromFP  の引数名は変更可能。EssentialParticleIクラスの粒子情報はFullParticle  クラスの粒子情報のサブセット。対応する情報を持つメンバ変数同士のデー  タ型が一致している必要はないが、実数型とベクトル型(または整数型とベ  クトル型)という違いがある場合に正しく動作する保証はない。\end{itemize}\subsubsection{場合によっては必要なメンバ関数}\subsubsubsection{概要}本節では、場合によっては必要なメンバ関数について記述する。相互作用ツリークラスのSEARCH\_MODE型にSEARCH\_MODE\_GATHERまたはSEARCH\_MODE\_SYMMETRYを用いる場合に必要となるメンバ関数ついて記述する。\subsubsubsection{相互作用ツリークラスのSEARCH\_MODE型にSEARCH\_MODE\_GATHERまたはSEARCH\_MODE\_SYMMETRYを用いる場合}\subsubsubsubsection{getRsearch}\begin{screen}\begin{verbatim}class EssentialParticleI {public:    PS::F64 search_radius;    PS::F64 getRsearch() const {        return this->search_radius;    }};\end{verbatim}\end{screen}\begin{itemize}\item {\bf 前提}  EssentialParticleIクラスのメンバ変数search\_radiusはある１つの粒子の  近傍粒子を探す半径の大きさ。このsearch\_radiusのデータ型はPS::F32型  またはPS::F64型。  \item {\bf 引数}  なし  \item {\bf 返値}  PS::F32型またはPS::F64型。 EssentialParticleIクラスの近傍粒子を探す  半径の大きさを保持したメンバ変数。  \item {\bf 機能}  EssentialParticleIクラスの近傍粒子を探す半径の大きさを保持したメンバ  変数を返す。\item {\bf 備考}  EssentialParticleIクラスのメンバ変数search\_radiusの変数名は変更可能。  \end{itemize}